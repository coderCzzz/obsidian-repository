## 安全性
- 什么是线程安全
	- 就是看程序能不能按照我们期望的执行
- 什么时候需要分析存在安全性问题
	- 存在共享数据且该数据会发生变化
- 可能导致安全性的问题两个方面
	- ==数据竞争==：实际上就是存在共享数据
		- 多个线程同时访问统一数据，且至少有一个线程会写这个数据
	- ==竞态条件==：
		- 程序的执行结果依赖线程执行的顺序，就是说根据线程执行的顺序不同，结果也不同，比如转账

## 活跃性问题
- 什么是活跃性问题
	- 即某个操作无法执行下去
	- 比如死锁、活锁、饥饿
- ==活锁==
	- 类比现实就是两个对面的人，互相让路
	- 解决：每个人让路之前，随机等待一个时间--`Raft分布式一致性算法`
- ==饥饿==
	- 线程无法访问资源，比如它优先度太低
	- 解决方案
		- 保证资源充足
		- 让每个线程获得资源的机会一样，也就是公平的分配资源--公平锁
		- 避免持有锁的线程长时间执行

## 性能问题
- 使用锁就会不可避免的导致串行化。根据一个定律，假如串行百分比是5%，那么无论怎么折腾，最后最高只能提高20倍的性能。
- 可以考虑使用无锁技术，比如`TLS`线程本地存储、写入时复制`Copy-On-write`、乐观锁等，Java并发包的原子类
- 较少锁持有时间，如使用细粒度的锁：Java并发包的`ConcurrentHashMap`,使用分段锁技术；