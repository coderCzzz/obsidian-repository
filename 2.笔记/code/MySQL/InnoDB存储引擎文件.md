## 表空间文件
- 将存储的数据按表空间进行存放。
- 默认有一个初始大小10MB，名为ibdata1的文件。
- 用户可以通过`innodb_data_file_path`进行设置
	- 可进一步，通过多个文件组成一个表空间，同时制定文件的属性
	- `innodb_data_file_path=/db/ibdata1:200M;/dr2/db/ibdata2:200M:autoextend`
- 若设置`innodb_file_per_table`，将每个基于InnoDB引擎的表建立一个独立表空间
	- 此时仅存储该表的数据、索引和插入缓冲BITMAP等信心
	- 其余信息还是存放在默认的表空间中。

## 重做日志文件
- 每个InnoDB存储引擎至少有1个重做日志文件组，每个文件组下至少有2个重做日志文件，如`ib_logfile0`和`ib_logfile1`。
- 与binlog的区别
	- binlog记录所有与MySQL数据库有关的日志记录，redolog只记录InnoDB存储引擎相关的
	- binlog记录一个事务的具体操作内容，逻辑日志，而redolog记录每个页的更改的物理情况
	- 写入时间不同
		- binlog仅在事务提交前进行提交，只写磁盘一次。
		- 事务进行中，redo条目不断被写入到重做日志
	- ![[截屏2021-11-18 下午3.31.37.png]]
	- ![[截屏2021-11-18 下午3.32.41.png]]
	- 先写入`redo log buffer`，然后按照一定顺序写入日志文件。
	- 每次写一个扇区，因此可以保证写入必定成功，不需要两次写。
	- 触发将缓冲刷盘到重做日志文件的条件
		- `Master Thread`每秒操作中
		- `innodb_flush_log_at_trx_commit`，表示事务提交时，处理重做日志的方式
			- 0 提交事务时，不将事务的重做日志写入磁盘，等待主线程刷新
			- 1 提交时，将重做日志同步写到磁盘，伴随fsync
			- 2 提交时，将重做日志异步写到磁盘，即写到文件系统的缓存中。