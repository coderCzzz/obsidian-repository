## 概述
- 1.0.x版本之前使用`Compact`和`Redundant`两种格式存放记录，称为`Antelope`格式。
	- `Redundant`为了兼容之前版本而保留
	- MySQL5.1默认使用`Compact`格式
	- 使用`SHOW TABLE STATUS LIKE 'table_name'`查看当前表使用的行格式
- 1.0.x版本引入新的文件格式：`Barracuda`
	- Compressed-对存储其中的行数据以zlib算法进行压缩
	- Dynamic
## Compact行记录格式
- MySQL5.0引入
![[截屏2021-11-18 下午4.05.04.png]]
- 变长字段长度列表：最大2字节。列小于255字节，用1字节表示，大于用2字节表示
- NULL标志位：指示行数据中是否有NULL值。有则1
- 记录头信息：固定5字节
	- 前2字节未知
	- delete_flag:该行是否被删除
	- `min_rec_flag`：是否为预先被定义为最小的记录，是则1
	- `n_owned`:拥有的记录数
	- `heap_no`：索引堆中该条记录的排序记录
	- `record_type`：记录类型：000普通001节点指针 011`supermum`等等
	- `next_record`:页中下一条记录的相对位置
![[截屏2021-11-18 下午4.07.05.png]]
- 最后为实际存储的每个列的数据。NULL不占该部分空间。
- 实际上还有两个隐藏列：事务ID列和回滚指针列。

## Redundant行记录格式
- MySQL5.0之前使用
- ![[截屏2021-11-18 下午4.13.17.png]]
- 与Compact相比，少了NULL标志位，记录头信息有点差别

## 行溢出数据
- 将某些数据存储在真正的数据页面之外，如`BLOB、LOB`,·`VARCHAR`也有可能
- 实际数据存储在4个未压缩的二进制大对象页中
- 数据页实际存储前缀数据+偏移量（指向行溢出页，也就是上述二进制大对象页）