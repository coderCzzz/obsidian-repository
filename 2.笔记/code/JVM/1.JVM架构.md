---
date created: 2021-11-02 11:56
---
## JVM架构
![[截屏2021-11-01 上午11.56.04.png]]
- [[类加载子系统]]
- [[运行时数据区概述与线程#运行时数据区]]
	- [[方法区]]
	- [[虚拟机栈]]
		- [[java栈]]
		- [[本地方法栈]]
	- [[堆]]
	- [[程序计数器]]
- [[执行引擎]]
- [[本地方法接口]]与[[本地方法库]]


JVM代码执行流程
![[截屏2021-11-01 上午11.57.13.png]]

## JVM指令集架构

Java编译器的指令流是基于栈的指令集架构
### 基于栈的指令集架构
- 设计和实现更简单，适用于资源有限的系统
- 避开了寄存器的分配难题：使用零地址指令方式分配
- 指令流中的指令大部分是零地址指令，其执行过程依赖于操作栈。指令集更小，编译器容易实现
- 不需要硬件支持，可移植性更好，更好实现跨平台
### 基于寄存器的指令集架构
- 如x86的二级制指令集：如传统PC
- 指令集完全依赖硬件，可移植性差
- 性能优秀和执行更高效
- 花费更少的指令去完成一项操作
- 大部分情况下，基于寄存器架构往往以一地址指令、二、三地址指令为主，基于栈以零地址指令为主。

---

## JVM的生命周期

### 启动

- 通过引导类加载器创建一个初始类完成。
- 该类由虚拟机的具体实现指定。

### 执行

1. 执行Java程序
2. 程序开始时运行，程序结束时停止
3. 执行一个Java程序，实际上是执行Java虚拟机这个进程。

### 退出

1. 程序正常执行结束
2. 程序在执行过程中遇到了异常或错误而异常终止
3. 操作系统错误
4. 线程调用`Runtime`类或`System`类的`exit()`方法，或`Runtime`类的`halt（）`方法，且Java安全管理器也允许这次操作
5. `JNI Invocation API`加载或卸载虚拟机。
