## String的基本特性
1. String类被声明为final，不可以被继承
2. String实现了`Serializable`，表示支持序列化。实现了`Comparable`接口，表示可以比较大小
3. String在jdk8及以前内部定义了`final char value[]`用于存储字符串数据，jdk9改为`byte[]`

### 为什么要把String设计成不可变的
1. 线程安全
	- 对象传引用，则有可能一个变量指向同一个String，多线程下，如果一个在读，另一个在改就会出问题。
2. 保证哈希值不变，如在HashMap中。
3. 安全性。比如网络连接，打开文件等操作，如果字符串可变就会有安全问题
## 为什么JDK9改变了String的结构
1. 大多数字符串只包含拉丁字符，而这些字符只占1个字节。char[]每个字符占两个字节，这样节约空间。
2. `byte[]`也会根据编码智能的选择占用一个字符还是两个字符。

## 字符串常量池
1. 字符串常量池是一个固定大小的`HashTable`，默认值大小长度是1009。如果放进常量池的String非常多，就会造成哈希冲突严重，从而导致链表过长，造成影响：调用`String.intern()`方法时性能大幅下降。
2. 使用`-XX:StringTablesize`可设置`StringTable`的长度
3. jdk6固定长度1009。jdk7默认60013，设置没有要求。jdk8默认60013，可以设置的最小值是1009。


## String的内存分配
1. 8种基本数据类型和String都有常量池。
2. String常量池的使用
	1. 直接使用双引号声明出来的对象会直接存储在常量池中
	2. String提供的`intern（）`方法

## String基本操作
### 字符串拼接
1. 常量与常量的拼接结果在常量池，编译器优化。如`String s1="a" + "b" +"c"`
2. 常量池中不会存在相同内容的变量
3. 拼接前后，只要有一个是变量，结果就在堆中。变量拼接原理StringBuilder。如`Stirng s2= s1 +"aa"`
4. 如果拼接的结果调用`intern()`方法，则根据该字符串是否在常量池中存在：
	1. 存在，则返回字符串在常量池中的地址
	2. 不存在，则在常量池中创建一份，并返回次对象的地址。


## intern()的使用
### 方法说明
1. `intern()`方法是一个`native`方法，调用底层C的方法。
2. 字符串池最迟是空的。调用`intern()`方法时，如果字符串在池中存在，则返回池中字符串的地址，如果不存在，就将该字符串对象添加到池中，并返回该字符串对象的地址。
3. 不是双引号声明的String对象，可以使用该方法。
4. 保证字符串在内存中只有一份拷贝，节约空间，加快字符串操作任务的执行速度。

### new String("ab")会创建几个对象
- 2个，`"ab"`在字符串常量池。`new`关键词在堆中创建。
## StringTable垃圾回收
## G1中的String去重操作