## NoSQL四大分类
### 概述
- `Not only sql`,泛指非关系型数据库。
- KV键值对
	- 新浪：Redis
	- 美团：Redis+Tair
	- 阿里：Redis+memecache
- 文档型数据库（bson格式，和json一样）
	- MongoDB
		- 基于分布式文件存储的数据库，C++编写，主要用来处理大量文档
		- 介于关系型和非关系型数据库的产品，最像关系型数据库的
	- ConthDB
- 列存储数据库
	- HBase
	- 分布式文件系统
- 图关系数据库
	- 存储数据结构中图关系的，如社交网络的图拓扑
	- Neo4j，InfoGrid

### 对比
|分类			|举例			|应用场景							|数据结构			|优点				|缺点				|
|----------|------		|-----------				|------	----		|-------		|-----------		|
|键值对	|Redis			|内容缓存					|通常是hashtable|查找速度快|数据无结构化，只能当做字符或二进制数据|
|列存储	|HBase		|分布式文件系统		|列簇式存储，将同一列的数据存储在一起|查找速度快，可扩展性强，更容易进行分布式扩展					|功能相对局限|
|文档型	|MongoDB|web应用，类似键值对，但是value是结构化的|键值对|数据结构要求不严格，表结构不严格，无需预先定义表结构|查询性能不高，且缺乏统一的查询语法|
|图形		|Neo4j			|社交网络，推荐系统等。专注于构建关系图谱|图结构|利用图结构相关算法|很多时候需要对整个图做计算才能得出需要的信息，且该结构不太好做分布式的集群方案|

## Redis入门
 ### Redis能干嘛
- 内存存储，持久化（rdb、aof）
- 效率高、可用于高速缓存
- 发布订阅系统
- 地图信息分析
- 计时器、计数器（浏览量）

### 特性
- 多样的数据类型
- 持久化
- 集群
- 事务

### Linux下安装
[[linux下环境安装#Redis]]

### redis-benchmark性能测试
- 是一个官方自带的性能测试工具
- 后面跟参数
	- `-h`指定服务器主机名ip
	- `-p`指定服务器端口
	- `-c`指定并发连接数，默认50
	- `-n`指定请求书，默认10000
- 例子
```
# 测试100个并发连接，100000请求
redis-benchmark -h localhost -p 6379 -c 100 -n 100000
```
- 分析测试数据

```
会测试每个命令的执行情况，这里说一下SET
====== SET ======
  100000 requests completed in 0.81 seconds      #表示100000个并发
  100 parallel clients                           #表示100个客户端并行执行
  3 bytes payload
  keep alive: 1                                  #表示在一台服务器上执行

96.88% <= 1 milliseconds                         #1毫秒内完成的数据比例
98.28% <= 2 milliseconds
99.50% <= 3 milliseconds
99.90% <= 8 milliseconds
100.00% <= 8 milliseconds
123456.79 requests per second

```

### 基础知识
- 默认有16个数据库，默认使用第0个数据库。可以使用`select 编号`进行切换
- 基本命令
	- `select 编号` 切换数据库
	- `DBSIZE` 查看数据库大小
	- `keys *`查看当前数据库所有的`key`
	- `flushdb` 清除当前数据库
	- `flushall`清除所有数据库
- `Redis`是单线程的
	- 因为`Redis`是基于内存的，因此`cpu`不是其性能瓶颈，因此完全可以使用单线程。`Redis`的瓶颈是根据机器的内存和网络带宽。










